"use strict";(self.webpackChunkAdventuresInDevOps=self.webpackChunkAdventuresInDevOps||[]).push([[375],{706:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var o=n(5378),s=n(4848),a=n(8453);const i={hide_table_of_contents:!0,title:"The Blog Post Release Automation",description:"The automation that runs the Adventures in DevOps PodCast",image:"./post.jpg",date:new Date("2025-05-19T00:00:00.000Z")},r=void 0,l={image:n(8320).A,authorsImageUrls:[]},d=[{value:"The Blog Post Release Automation",id:"the-blog-post-release-automation",level:2},{value:"Execution",id:"execution",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"The podcast image",id:"the-podcast-image",level:2},{value:"The result",id:"the-result",level:2},{value:"Our Verdict",id:"our-verdict",level:2}];function c(e){const t={a:"a",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"the-blog-post-release-automation",children:"The Blog Post Release Automation"}),"\n",(0,s.jsx)(t.p,{children:"I made this mistake this week of believing I wanted to automate, using an LLM of course, some parts of the painful podcast release cycle."}),"\n",(0,s.jsxs)(t.p,{children:["Weekly I record episodes of the podcast ",(0,s.jsx)(t.a,{href:"https://adventuresindevops.com",children:"Adventures in DevOps"})," with my awesome co-host. Of course all the episodes are available on our podcast website as well other streaming platforms."]}),"\n",(0,s.jsxs)(t.p,{children:["But! Since we're a technical podcast, we decided to make our infrastructure open source (On ",(0,s.jsx)(t.a,{href:"https://github.com/AdventuresInDevops/Website",children:"GitHub"})," unfortunately), but to go further it also uses ",(0,s.jsx)(t.a,{href:"https://github.com/AdventuresInDevops/Website/blob/main/.github/workflows/build.yml",children:"GitHub Actions"})," to publish the ",(0,s.jsx)(t.a,{href:"https://github.com/AdventuresInDevops/Website/blob/main/.github/workflows/build.yml",children:"episodes to our website"}),". There is of course the nasty bit of actually recording the episodes, editing the episodes, and then downloading and formatting them to make them nice."]}),"\n",(0,s.jsxs)(t.p,{children:["After that is all done though, it is time to create the episode page and most importantly the cornerstone of ever podcast, ",(0,s.jsx)(t.strong,{children:"an awesome episode image"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"So let's get down to it."}),"\n",(0,s.jsx)(t.h2,{id:"execution",children:"Execution"}),"\n",(0,s.jsx)(t.p,{children:"Interestingly enough, the Nova Lite model failed completely attempting to request it to actually build the command I needed to execute the model itself. Not very self-aware, you might say."}),"\n",(0,s.jsx)(t.p,{children:"However using other models I was able to coax out the following recommendation:"}),"\n",(0,s.jsx)(t.p,{children:"With the episode saved in the transcript.txt file, and the instructions we want to run in the instructions.txt"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"#!/usr/bin/env node\n\nimport { BedrockRuntimeClient, InvokeModelCommand } from '@aws-sdk/client-bedrock-runtime';\nimport fs from 'fs/promises';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\n\n// Resolve file paths\nconst __dirname = path.dirname(fileURLToPath(import.meta.url));\nconst instructionsPath = path.resolve(__dirname, 'instructions.txt');\nconst transcriptPath = path.resolve(__dirname, 'transcript.txt');\n\n// Set up Bedrock client\nconst client = new BedrockRuntimeClient({\n  region: 'eu-west-1'\n});\n\n(async () => {\n  try {\n    // Read both input files\n    const [instructions, transcript] = await Promise.all([\n      fs.readFile(instructionsPath, 'utf-8'),\n      fs.readFile(transcriptPath, 'utf-8')\n    ]);\n\n    // Build prompt\n    const content = `Instructions:\\n${instructions}\\n\\nTranscript:\\n---\\n${transcript}\\n---`;\n\n    const payload = {\n      messages: [{\n        role: 'user',\n        content\n      }],\n      // Max Token Count and other parameters: https://docs.aws.amazon.com/bedrock/latest/userguide/model-parameters-titan-text.html\n      temperature: 0.7,\n      top_p: 0.9,\n      max_tokens: 4096\n    };\n\n    // Invoke the model\n    const command = new InvokeModelCommand({\n      modelId: 'amazon.nova-lite-v1:0',\n      contentType: 'application/json',\n      accept: 'application/json',\n      body: JSON.stringify(payload)\n    });\n\n    const response = await client.send(command);\n\n    // Decode and print response\n    const responseBody = await response.body.transformToString();\n    console.log('\u2705 Model response:\\n');\n    console.log(responseBody.output.message.context);\n  } catch (err) {\n    console.error('\u274c Failed to invoke model:', err);\n    process.exit(1);\n  }\n})();\n"})}),"\n",(0,s.jsx)(t.p,{children:"And that's it, we can take the output create a pull request and then release the episode."}),"\n",(0,s.jsx)(t.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(t.p,{children:"Of course nothing works the first time, and for us the first issue is"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"Failed to invoke model: ValidationException: Invocation of model ID amazon.nova-lite-v1:0 with on-demand throughput isn\u2019t supported. Retry your request with the ID or ARN of an inference profile that contains this mode.\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Okay turns out there is some magic that it takes to run the Nova model in other regions, so instead of trying to get that to work, we'll switch to the region ",(0,s.jsx)(t.code,{children:"us-east-1"}),"."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"Malformed input request: #: required key [messages] not found, please reformat your input and try again.\n"})}),"\n",(0,s.jsx)(t.p,{children:"Hmmm, weird, it turns out there have been some serious changes to the API, in which the documentation is not really up to date. So figuring out the correct parameters is actually a bit of a problem."}),"\n",(0,s.jsx)(t.p,{children:"But setting the payload as just:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"const payload = {\n      messages: [{\n        role: 'user',\n        content: [{\n          // type: \"text\",\n          text: inputText\n        }]\n      }]\n      // Max Token Count and other parameters: https://docs.aws.amazon.com/bedrock/latest/userguide/model-parameters-titan-text.html\n      // temperature: 0.7\n      // top_p: 0.9,\n      // max_tokens: 4096\n    };\n"})}),"\n",(0,s.jsx)(t.p,{children:"Solves most of this problem."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Nova self fail result",src:n(8944).A+"",width:"800",height:"554"})}),"\n",(0,s.jsx)(t.p,{children:'Although one problem we keep running into is that the Nova Modals "Content" filter keeps blocking itself. Even sending the very innocuous "hey" to the model to generate three images, fails after the first one.'}),"\n",(0,s.jsx)(t.p,{children:"Success!?"}),"\n",(0,s.jsx)(t.h2,{id:"the-podcast-image",children:"The podcast image"}),"\n",(0,s.jsx)(t.p,{children:"The next step is run the generator a second time, but this time use the output from the first step as the input to generate an image relevant to the podcast."}),"\n",(0,s.jsx)(t.p,{children:"There are a couple of changes that have to be made."}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"We don't need the transcript anymore since we already have a summary."}),"\n",(0,s.jsx)(t.li,{children:"We need to pass an input image, we don't want some random picture we want something that is brand aware."}),"\n",(0,s.jsx)(t.li,{children:"The output will be an image as well."}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["So instead we'll use the Nova Canvas model: ",(0,s.jsx)(t.code,{children:"amazon.nova-canvas-v1:0"})," with the parameters:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"const payload = {\n      messages: [\n        {\n          role: 'user',\n          content: [\n            { text: inputText },\n            {\n              image: {\n                format: 'jpeg',\n                source: {\n                  bytes: (await fs.readFile(logoImage)).toString('base64')\n                }\n              }\n            },\n            {\n              image: {\n                format: 'png',\n                source: {\n                  bytes: (await fs.readFile(referenceImage)).toString('base64')\n                }\n              }\n            }\n          ]\n        }\n      ]\n    };\n"})}),"\n",(0,s.jsx)(t.h2,{id:"the-result",children:"The result"}),"\n",(0,s.jsxs)(t.p,{children:["We'll I think pictures are way more expressive than words, so check out the latest episode here on ",(0,s.jsx)(t.a,{href:"https://adventuresindevops.com/episodes",children:"Adventures in DevOps"})," to see how exactly well we did!"]}),"\n",(0,s.jsx)(t.h2,{id:"our-verdict",children:"Our Verdict"}),"\n",(0,s.jsx)(t.p,{children:"Nova is not ready for prime time. For now, we are going to try out some of the other models offered through Bedrock and focus on getting more high quality content. Quality and reliability are crucial here as we aim to cut down on time to create the episode releases."})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8320:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/post-ccd5f2c52996f72f3f35ddc9841673fb.jpg"},8944:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/nova-self-fail-ffb64d9190ac46fcb9626bf3d9a1e4cd.webp"},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>r});var o=n(6540);const s={},a=o.createContext(s);function i(e){const t=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(a.Provider,{value:t},e.children)}},5378:e=>{e.exports=JSON.parse('{"permalink":"/episodes/podcast-automation-review","editUrl":"https://github.com/AdventuresInDevops/Website/tree/main/episodes/podcast-automation-review/index.md","source":"@site/episodes/podcast-automation-review/index.md","title":"The Blog Post Release Automation","description":"The automation that runs the Adventures in DevOps PodCast","date":"2025-05-19T00:00:00.000Z","tags":[],"hasTruncateMarker":false,"authors":[],"frontMatter":{"hide_table_of_contents":true,"title":"The Blog Post Release Automation","description":"The automation that runs the Adventures in DevOps PodCast","image":"./post.jpg","date":"2025-05-19T00:00:00.000Z"},"unlisted":false,"nextItem":{"title":"Ground Truth & Guided Journeys: Rethinking Data for AI","permalink":"/episodes/semantic-data-governance-enterprise-knowledge-graphs"}}')}}]);